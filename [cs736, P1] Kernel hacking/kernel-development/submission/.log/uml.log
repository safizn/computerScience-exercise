# PS1="[\u@uml:\w ] $ " # make it more friendly
  echo [\u@uml:\w ] $ "root_fs inside UML" > /info.txt; uname -a >> /info.txt
[\u@uml:\w ] $ \
  mkdir -p /mnt/fs_device_1; mount -t ext2 /dev/ubdb /mnt/fs_device_1; \
  ls -al /mnt/fs_device_1
ext2 filesystem being mounted at /mnt/fs_device_1 supports timestamps until 2038 (0x7fffffff)
total 24
drwxr-xr-x 3 root root  4096 Sep 23 04:33 .
drwxr-xr-x 3 root root  4096 Sep 24 02:05 ..
drwx------ 2 root root 16384 Sep 23 04:33 lost+found
[\u@uml:\w ] $ df -hT; lsblk | grep loop0; mount | grep uml
Filesystem     Type  Size  Used Avail Use% Mounted on
/dev/ubdb      ext2  5.0G   10M  4.7G   1% /mnt/fs_device_1
lsblk: failed to access sysfs directory: /sys/dev/block: No such file or directory
[\u@uml:\w ] $ \
  uml_mount="/mnt/host"; host_mount="/root/mount_docker-container/uml-transfer"; mkdir -p $uml_mount; \
  mount none $uml_mount -t hostfs -o $host_mount
[\u@uml:\w ] $ cd /mnt/host \
> echo "dummy" >> file.txt \
> ./test;
[\u@uml:\w ] $ cd /mnt/fs_device_1; cp /mnt/host/test ./; 
[\u@uml:\w ] $ ./test
Test strat [
[system call] counter = 0.
[test.c] file descriptor = 715845648
[ext2_fsync] counter = 1
[test.c] fsync call returned value = 715845648
[system call] counter = 1.
] Test end
[\u@uml:\w ] $ ./test
Test strat [
[system call] counter = 1.
[test.c] file descriptor = 715845648
[ext2_fsync] counter = 2
[test.c] fsync call returned value = 715845648
[system call] counter = 2.
] Test end
[\u@uml:\w ] $ ./test
Test strat [
[system call] counter = 2.
[test.c] file descriptor = 715845648
[ext2_fsync] counter = 3
[test.c] fsync call returned value = 715845648
[system call] counter = 3.
] Test end
[\u@uml:\w ] $ ./test
Test strat [
[system call] counter = 3.
[test.c] file descriptor = 715845648
[ext2_fsync] counter = 4
[test.c] fsync call returned value = 715845648
[system call] counter = 4.
] Test end
[\u@uml:\w ] $ ./test
Test strat [
[system call] counter = 4.
[test.c] file descriptor = 715845648
[ext2_fsync] counter = 5
[test.c] fsync call returned value = 715845648
[system call] counter = 5.
] Test end
[\u@uml:\w ] $ ./test
Test strat [
[system call] counter = 5.
[test.c] file descriptor = 715845648
[ext2_fsync] counter = 6
[test.c] fsync call returned value = 715845648
[system call] counter = 6.
] Test end
[\u@uml:\w ] $
[\u@uml:\w ] $ dmesg
[    0.000000] Linux version 5.19.9 (root@fac835f91e7d) (gcc (Debian 10.2.1-6) 10.2.1 20210110, GNU ld (GNU Binutils for Debian) 2.35.2) #1 Sat Sep 24 03:42:43 UTC 2022
[    0.000000] Zone ranges:
[    0.000000]   Normal   [mem 0x0000000000000000-0x0000000068635fff]
[    0.000000] Movable zone start for each node
[    0.000000] Early memory node ranges
[    0.000000]   node   0: [mem 0x0000000000000000-0x0000000008635fff]
[    0.000000] Initmem setup node 0 [mem 0x0000000000000000-0x0000000008635fff]
[    0.000000] random: crng init done
[    0.000000] pcpu-alloc: s0 r0 d32768 u32768 alloc=1*32768
[    0.000000] pcpu-alloc: [0] 0
[    0.000000] Built 1 zonelists, mobility grouping on.  Total pages: 33888
[    0.000000] Kernel command line: rootfstype=ext4 ubda=./root_fs ubdb=./fs_device_1 rw mem=128M init=/bin/sh TERM=linux root=98:0 console=tty
[    0.000000] Unknown kernel command line parameters "mem=128M", will be passed to user space.
[    0.000000] Dentry cache hash table entries: 32768 (order: 6, 262144 bytes, linear)
[    0.000000] Inode-cache hash table entries: 16384 (order: 5, 131072 bytes, linear)
[    0.000000] Sorting __ex_table...
[    0.000000] mem auto-init: stack:off, heap alloc:off, heap free:off
[    0.000000] Memory: 122956K/137432K available (3292K kernel code, 1022K rwdata, 1132K rodata, 142K init, 168K bss, 14476K reserved, 0K cma-reserved)
[    0.000000] NR_IRQS: 64
[    0.000000] clocksource: timer: mask: 0xffffffffffffffff max_cycles: 0x1cd42e205, max_idle_ns: 881590404426 ns
[    0.000000] Calibrating delay loop... 7752.90 BogoMIPS (lpj=38764544)
[    0.150000] pid_max: default: 32768 minimum: 301
[    0.150000] Mount-cache hash table entries: 512 (order: 0, 4096 bytes, linear)
[    0.150000] Mountpoint-cache hash table entries: 512 (order: 0, 4096 bytes, linear)
[    0.150000] Checking that host ptys support output SIGIO...Yes
[    0.150000] devtmpfs: initialized
[    0.150000] clocksource: jiffies: mask: 0xffffffff max_cycles: 0xffffffff, max_idle_ns: 19112604462750000 ns
[    0.150000] futex hash table entries: 256 (order: 0, 6144 bytes, linear)
[    0.150000] NET: Registered PF_NETLINK/PF_ROUTE protocol family
[    0.150000] pps_core: LinuxPPS API ver. 1 registered
[    0.150000] pps_core: Software ver. 5.3.6 - Copyright 2005-2007 Rodolfo Giometti <giometti@linux.it>
[    0.150000] PTP clock support registered
[    0.150000] clocksource: Switched to clocksource timer
[    0.150000] VFS: Disk quotas dquot_6.6.0
[    0.150000] VFS: Dquot-cache hash table entries: 512 (order 0, 4096 bytes)
[    0.150000] NET: Registered PF_INET protocol family
[    0.150000] IP idents hash table entries: 4096 (order: 3, 32768 bytes, linear)
[    0.150000] tcp_listen_portaddr_hash hash table entries: 512 (order: 0, 4096 bytes, linear)
[    0.150000] Table-perturb hash table entries: 65536 (order: 6, 262144 bytes, linear)
[    0.150000] TCP established hash table entries: 2048 (order: 2, 16384 bytes, linear)
[    0.150000] TCP bind hash table entries: 2048 (order: 2, 16384 bytes, linear)
[    0.150000] TCP: Hash tables configured (established 2048 bind 2048)
[    0.150000] UDP hash table entries: 256 (order: 1, 8192 bytes, linear)
[    0.150000] UDP-Lite hash table entries: 256 (order: 1, 8192 bytes, linear)
[    0.150000] NET: Registered PF_UNIX/PF_LOCAL protocol family
[    0.150000] printk: console [stderr0] disabled
[    0.150000] mconsole (version 2) initialized on /root/.uml/kernel/mconsole
[    0.150000] Checking host MADV_REMOVE support...OK
[    0.150000] workingset: timestamp_bits=62 max_order=15 bucket_order=0
[    0.150000] io scheduler mq-deadline registered
[    0.150000] io scheduler kyber registered
[    0.150000] NET: Registered PF_PACKET protocol family
[    0.150000] Initialized stdio console driver
[    0.150000] Console initialized on /dev/tty0
[    0.150000] printk: console [tty0] enabled
[    0.150000] Initializing software serial port version 1
[    0.150000] printk: console [mc-1] enabled
[    0.160000] EXT4-fs (ubda): recovery complete
[    0.160000] EXT4-fs (ubda): mounted filesystem with ordered data mode. Quota mode: none.
[    0.160000] VFS: Mounted root (ext4 filesystem) on device 98:0.
[    0.160000] devtmpfs: mounted
[    0.160000] This architecture does not have kernel memory protection.
[    0.160000] Run /bin/sh as init process
[    0.160000]   with arguments:
[    0.160000]     /bin/sh
[    0.160000]   with environment:
[    0.160000]     HOME=/
[    0.160000]     TERM=linux
[    0.160000]     mem=128M
[   22.290000] EXT2-fs (ubdb): warning: mounting unchecked fs, running e2fsck is recommended
[   22.290000] ext2 filesystem being mounted at /mnt/fs_device_1 supports timestamps until 2038 (0x7fffffff)
[   76.070000] [system call] counter = 0.
[   76.080000] [ext2_fsync] counter = 1
[   76.080000] [system call] counter = 1.
[   86.630000] [system call] counter = 1.
[   86.640000] [ext2_fsync] counter = 2
[   86.640000] [system call] counter = 2.
[   89.480000] [system call] counter = 2.
[   89.480000] [ext2_fsync] counter = 3
[   89.490000] [system call] counter = 3.
[   91.320000] [system call] counter = 3.
[   91.320000] [ext2_fsync] counter = 4
[   91.320000] [system call] counter = 4.
[   93.190000] [system call] counter = 4.
[   93.190000] [ext2_fsync] counter = 5
[   93.190000] [system call] counter = 5.
[   96.180000] [system call] counter = 5.
[   96.190000] [ext2_fsync] counter = 6
[   96.190000] [system call] counter = 6.
[\u@uml:\w ] $ halt -f
Failed to read /proc/cmdline. Ignoring: No such file or directory
Halting.
reboot: System halted

[root@container:~ ] $